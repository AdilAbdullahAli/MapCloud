Video to Map Overlay ProjectThis project provides a Python script to automate the process of extracting frames from a video, stitching them into a panoramic image, and then overlaying this stitched image onto an interactive Folium map. This can be particularly useful for drone footage analysis, creating custom map overlays from sequential imagery, or visualizing geographic data captured from a moving platform.FeaturesVideo Frame Extraction: Extracts individual frames from a given video file at a specified frames-per-second (FPS) rate.Image Stitching: Utilizes OpenCV's powerful stitching capabilities to combine a sequence of images into a seamless panorama.Interactive Map Overlay: Generates an HTML map using the folium library, allowing you to overlay the stitched panoramic image onto a geographic location with specified bounds.Customizable Paths: Easily configure input video paths, output directories, and file names.Adjustable Frame Rate: Control the density of extracted frames to balance detail and processing time.PrerequisitesBefore running the script, ensure you have Python installed (version 3.7 or higher recommended). You will also need the following Python libraries:opencv-pythonfoliumYou can install them using pip:pip install opencv-python folium
UsageClone the repository (or save the script):Save the provided Python script (e.g., video_to_map.py) to your local machine.Prepare your video file:Place your video file (e.g., geo.mp4) in a known location. Update the video_file variable in the script to point to your video's path.video_file = r"C:\Users\adila\Videos\Captures\geo.mp4"
Configure Output Paths:Specify the output_folder where extracted frames will be saved, and the output_stitched_path for the final panorama.output_folder = r"C:\Users\adila\Videos\Captures\ExtractedFrames"
extracted_frames_folder = r"C:\Users\adila\Videos\Captures\ExtractedFrames" # Same as output_folder
output_stitched_path = r"C:\Users\adila\Videos\Captures\stitched_drone_footage.png"
Set Map Coordinates and Bounds:Crucially, define the image_bounds (latitude/longitude coordinates for the bottom-left and top-right corners of your stitched image) and map_center_coordinates for the Folium map. These values are essential for correctly positioning your stitched image on the map.stitched_image_file = r"C:\Users\adila\Videos\Captures\MyStitchedDroneImage.png" # This should match output_stitched_path
image_bounds = [
    [30.1100, 78.2800], # [min_latitude, min_longitude]
    [30.1200, 78.2900]  # [max_latitude, max_longitude]
]

map_center_coordinates = [30.1158, 78.2853] # [latitude, longitude]
output_map_html = "drone_footage_overlay_map.html"
Note: The stitched_image_file variable in the overlay_image_on_folium_map call should ideally point to the same file as output_stitched_path from the stitching step. Ensure consistency.Run the script:Execute the Python script from your terminal:python video_to_map.py
The script will print progress messages as it extracts frames, stitches them, and generates the HTML map file.View the interactive map:Once the script completes, an HTML file (e.g., drone_footage_overlay_map.html) will be created in the specified output directory. Open this file in any web browser to view your stitched image overlaid on an interactive map.Example OutputUpon successful execution, you will find:A folder named ExtractedFrames (or whatever you specified) containing PNG images.A panoramic image file (e.g., stitched_drone_footage.png).An HTML file (e.g., drone_footage_overlay_map.html) which you can open in a browser to see the interactive map with your image overlay.TroubleshootingError: Could not open video: Double-check the video_file path. Ensure the video file exists and is accessible.Stitching failed! Error code: ...:Stitcher_ERR_NEED_MORE_IMGS: The frames might not have enough overlap for stitching, or there aren't enough distinct features. Try extracting more frames per second (frames_per_second parameter) or using a video with more visual overlap between consecutive frames.Stitcher_ERR_HOMOGRAPHY_EST_FAIL: OpenCV couldn't find enough matching features between frames to estimate the transformation needed for stitching. This can happen with very uniform scenes, blurry footage, or too little overlap.Image not appearing on map:Verify stitched_image_path in overlay_image_on_folium_map points to the correct stitched image file.Ensure image_bounds are accurate for your image's geographic location. Incorrect bounds will place the image in the wrong spot or make it appear distorted.Check the browser's developer console for any errors when opening the HTML map file.ContributingFeel free to fork this repository, open issues, or submit pull requests to improve the script.LicenseThis project is open-source and available under the MIT License (if you choose to add one).
